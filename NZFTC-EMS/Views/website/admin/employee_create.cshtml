@using NZFTC_EMS.Data.Entities
@model Employee

@{
    Layout = "~/Views/Shared/_portal.cshtml";
    ViewData["Title"] = "Create Employee";
}

<link rel="stylesheet" href="~/css/employee.css" asp-append-version="true" />

<div class="page-container">

    <div class="header-row d-flex justify-content-between align-items-center mb-3">
        <h2 class="page-title fw-bold mb-0">Create Employee</h2>
    </div>

    <form asp-action="Create" asp-controller="employee_management" method="post">
        @Html.AntiForgeryToken()

        <div class="card shadow-sm border-0 mb-3">
            <div class="card-body">

                <!-- PERSONAL DETAILS -->
                <div class="form-section mb-3">
                    <div class="form-section-title">Personal Details</div>
                    <hr class="mt-1 mb-3" />
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label asp-for="FirstName" class="form-label">First Name</label>
                            <input asp-for="FirstName" class="form-control" />
                            <span asp-validation-for="FirstName" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="LastName" class="form-label">Last Name</label>
                            <input asp-for="LastName" class="form-control" />
                            <span asp-validation-for="LastName" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label asp-for="Email" class="form-label">Email</label>
                            <input asp-for="Email" class="form-control" />
                            <span asp-validation-for="Email" class="text-danger"></span>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label asp-for="Phone" class="form-label">Phone</label>
                            <input asp-for="Phone" class="form-control" />
                            <span asp-validation-for="Phone" class="text-danger"></span>
                        </div>

                        <div class="col-md-6 mb-3">
                            <label asp-for="Address" class="form-label">Address</label>
                            <input asp-for="Address" class="form-control" />
                            <span asp-validation-for="Address" class="text-danger"></span>
                        </div>

                        <div class="col-md-3 mb-3">
                            <label asp-for="Birthday" class="form-label">Birthday</label>
                            <input asp-for="Birthday" class="form-control" type="date" />
                            <span asp-validation-for="Birthday" class="text-danger"></span>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label asp-for="Gender" class="form-label">Gender</label>
                            <input asp-for="Gender" class="form-control" />
                            <span asp-validation-for="Gender" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <!-- JOB DETAILS -->
                <div class="form-section mb-3">
                    <div class="form-section-title">Job Details</div>
                    <hr class="mt-1 mb-3" />
                    <div class="row mb-3">
                        <div class="col-md-4 mb-3">
                            <label asp-for="Department" class="form-label">Department</label>
                            <select asp-for="Department"
                                    id="Department"
                                    class="form-select"
                                    asp-items="ViewBag.Departments">
                                <option value="" selected disabled>-- Select department --</option>
                            </select>
                            <span asp-validation-for="Department" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="JobTitle" class="form-label">Job Title</label>
                            <select asp-for="JobTitle"
                                    id="JobTitle"
                                    class="form-select"
                                    asp-items="ViewBag.JobTitles">
                                <option value="" selected disabled>-- Select job title --</option>
                            </select>
                            <span asp-validation-for="JobTitle" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="PayFrequency" class="form-label">Pay Frequency</label>
                            <input asp-for="PayFrequency" id="PayFrequency" class="form-control" readonly />
                            <span asp-validation-for="PayFrequency" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="StartDate" class="form-label">Start Date</label>
                            <input asp-for="StartDate" class="form-control" type="date" />
                            <span asp-validation-for="StartDate" class="text-danger"></span>
                        </div>
                    </div>
                </div>

                <!-- PAY GRADE -->
                <div class="form-section mb-3">
                    <div class="form-section-title">Pay Grade Details</div>
                    <hr class="mt-1 mb-3" />
                    <div class="row mb-3">
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Pay Grade (auto)</label>
                            <input type="text"
                                   id="PayGradeDisplay"
                                   class="form-control"
                                   value="@Model?.PayGrade?.Name"
                                   readonly />
                        </div>
                        <div class="col-md-6 mb-3">
                            <label class="form-label">Basic Pay (from Pay Grade)</label>
                            <input type="text"
                                   id="BasicPayDisplay"
                                   class="form-control"
                                   value="@(Model?.BasicPay?.ToString("0.00") ?? "")"
                                   readonly />
                        </div>
                    </div>
                </div>

                <!-- EMERGENCY CONTACT -->
                <div class="form-section mb-1">
                    <div class="form-section-title">Emergency Contact</div>
                    <hr class="mt-1 mb-3" />
                    <div class="row mb-3">
                        <div class="col-md-4 mb-3">
                            <label asp-for="EmergencyContactName" class="form-label">Contact Name</label>
                            <input asp-for="EmergencyContactName" class="form-control" />
                            <span asp-validation-for="EmergencyContactName" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="EmergencyContactRelationship" class="form-label">Relationship</label>
                            <input asp-for="EmergencyContactRelationship" class="form-control" />
                            <span asp-validation-for="EmergencyContactRelationship" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="EmergencyContactPhone" class="form-label">Contact Number</label>
                            <input asp-for="EmergencyContactPhone" class="form-control" />
                            <span asp-validation-for="EmergencyContactPhone" class="text-danger"></span>
                        </div>

                        <div class="col-md-4 mb-3">
                            <label asp-for="EmergencyContactEmail" class="form-label">Contact Email</label>
                            <input asp-for="EmergencyContactEmail" class="form-control" />
                            <span asp-validation-for="EmergencyContactEmail" class="text-danger"></span>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="mt-2">
            <button type="submit" class="btn btn-primary">Save</button>
            <a asp-controller="employee_management"
               asp-action="Index"
               class="btn btn-secondary ms-2">
                Cancel
            </a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />

    <script>
        window.employeeJobMetaUrl = '@Url.Action("JobMeta", "employee_management")';
    </script>

    <script src="~/js/employee-jobdetails.js" asp-append-version="true"></script>
}


