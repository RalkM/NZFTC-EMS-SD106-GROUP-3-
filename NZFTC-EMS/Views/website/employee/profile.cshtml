@using NZFTC_EMS.Controllers
@model EmployeeProfileVm

@{
    Layout = ViewData["Layout"]?.ToString();
    ViewData["Title"] = "My Profile";
}


<link rel="stylesheet" href="~/css/portal-StyleSheet.css" />
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
<link rel="stylesheet" href="~/css/profile.css" asp-append-version="true" />

<div class="container-fluid py-4 mt-5">

    @if (TempData["msg"] != null)
    {
        <div class="row justify-content-center mb-3">
            <div class="col-12 col-xl-8 col-lg-10">
                <div class="alert alert-success mb-0">@TempData["msg"]</div>
            </div>
        </div>
    }

    <div class="row justify-content-center">
        <div class="col-12 col-xl-8 col-lg-10">

            <!-- Page title -->
            <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap gap-2">
                <h2 class="fw-bold mb-0">Profile</h2>

                <a class="btn btn-primary"
                   asp-controller="employee_profile"
                   asp-action="Edit">
                    Edit Profile
                </a>
            </div>

            <!-- Photo + name -->
            <div class="d-flex flex-column align-items-center mb-4">
                <div class="rounded-circle border mb-3 overflow-hidden"
                     style="width: 150px; height: 150px; object-fit: cover;">
                    <img src="@Model.ProfileImageUrl"
                         alt="Profile photo"
                         class="img-fluid w-100 h-100"
                         style="object-fit: cover;"
                         onerror="this.src='/images/default-profile.png';" />
                </div>

                <a class="btn btn-outline-primary btn-sm mb-2"
                   asp-controller="employee_profile"
                   asp-action="Edit">
                    Upload Photo
                </a>

                <div class="text-center">
                    <h5 class="fw-bold mb-0">@Model.FullName</h5>
                    <div class="text-muted">@Model.JobTitle</div>
                    <div class="text-muted">@Model.Department</div>
                </div>
            </div>

            <!-- Main card with sections -->
            <div class="card profile-main-card">
                <div class="card-body p-4">

                    <div class="row g-4">

                        <!-- Personal Details -->
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3">Personal Details</h5>
                            <hr class="mt-0" />
                            <dl class="row mb-0">
                                <dt class="col-sm-4 text-muted">Name</dt>
                                <dd class="col-sm-8">@Model.FullName</dd>

                                <dt class="col-sm-4 text-muted">Birthday</dt>
                                <dd class="col-sm-8">
                                    @(Model.Birthday.HasValue? Model.Birthday.Value.ToString("dd MMM yyyy") : "--")
                                </dd>

                                <dt class="col-sm-4 text-muted">Gender</dt>
                                <dd class="col-sm-8">@(!string.IsNullOrWhiteSpace(Model.Gender) ? Model.Gender : "--")</dd>
                            </dl>
                        </div>

                        <!-- Employment -->
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3">Employment</h5>
                            <hr class="mt-0" />
                            <dl class="row mb-0">
                                <dt class="col-sm-5 text-muted">Job Title</dt>
                                <dd class="col-sm-7">@Model.JobTitle</dd>

                                <dt class="col-sm-5 text-muted">Pay Frequency</dt>
                                <dd class="col-sm-7">
                                    @(!string.IsNullOrWhiteSpace(Model.PayFrequency) ? Model.PayFrequency : "--")
                                </dd>

                                <dt class="col-sm-5 text-muted">Start Date</dt>
                                <dd class="col-sm-7">
                                    @(Model.StartDate.HasValue? Model.StartDate.Value.ToString("dd MMM yyyy") : "--")
                                </dd>

                                <dt class="col-sm-5 text-muted">Earnings Rate</dt>
                                <dd class="col-sm-7">
                                    @(!string.IsNullOrWhiteSpace(Model.EarningsRate) ? Model.EarningsRate : "--")
                                </dd>
                            </dl>
                        </div>

                        <!-- Contact Information -->
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3">Contact Information</h5>
                            <hr class="mt-0" />
                            <dl class="row mb-0">
                                <dt class="col-sm-4 text-muted">Address</dt>
                                <dd class="col-sm-8">@Model.Address</dd>

                                <dt class="col-sm-4 text-muted">Phone</dt>
                                <dd class="col-sm-8">@Model.Phone</dd>

                                <dt class="col-sm-4 text-muted">Email</dt>
                                <dd class="col-sm-8">@Model.Email</dd>
                            </dl>
                        </div>

                        <!-- Emergency Contact -->
                        <div class="col-md-6">
                            <h5 class="fw-bold mb-3">Emergency Contact</h5>
                            <hr class="mt-0" />
                            <dl class="row mb-0">
                                <dt class="col-sm-5 text-muted">Name</dt>
                                <dd class="col-sm-7">
                                    @(string.IsNullOrWhiteSpace(Model.EmergencyName) ? "--" : Model.EmergencyName)
                                </dd>

                                <dt class="col-sm-5 text-muted">Relationship</dt>
                                <dd class="col-sm-7">
                                    @(string.IsNullOrWhiteSpace(Model.EmergencyRelationship) ? "--" : Model.EmergencyRelationship)
                                </dd>

                                <dt class="col-sm-5 text-muted">Phone</dt>
                                <dd class="col-sm-7">
                                    @(string.IsNullOrWhiteSpace(Model.EmergencyPhone) ? "--" : Model.EmergencyPhone)
                                </dd>

                                <dt class="col-sm-5 text-muted">Email</dt>
                                <dd class="col-sm-7">
                                    @(string.IsNullOrWhiteSpace(Model.EmergencyEmail) ? "--" : Model.EmergencyEmail)
                                </dd>
                            </dl>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>



